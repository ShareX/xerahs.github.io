---
layout: default
---

<section class="page-header">
    <div class="container">
        <div class="page-header-content animate-on-scroll">
            <h1 class="page-title gradient-text">FAQ</h1>
            <p class="page-subtitle">Frequently asked questions about XerahS</p>
        </div>
    </div>
</section>

<section class="faq-section section-padding">
    <div class="container">
        <div class="faq-layout">
            <!-- TOC Sidebar -->
            <aside class="faq-sidebar animate-on-scroll">
                <div class="sticky-toc">
                    <h3 class="toc-title">Contents</h3>
                    <nav class="toc-nav" id="toc-nav">
                        <!-- TOC generated by JS -->
                    </nav>
                </div>
            </aside>

            <!-- Main Content -->
            <div class="faq-main animate-on-scroll">
                <div class="faq-container card">
                    <div class="spotlight"></div>
                    <div class="faq-content" id="faq-content">
                        {{ content }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Marked.js for legacy support if needed, but Jekyll handles markdown content natively -->
<!-- We still need JS for TOC generation based on the rendered content -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tocEl = document.getElementById('toc-nav');
        const contentEl = document.getElementById('faq-content');
        const headings = contentEl.querySelectorAll('h1, h2, h3');
        const tocData = [];

        headings.forEach(function(heading) {
            if (!heading.id) {
                const slug = heading.textContent.toLowerCase()
                    .replace(/[^\w\s-]/g, '')
                    .replace(/\s+/g, '-')
                    .replace(/-+/g, '-');
                heading.id = slug;
            }

            const level = parseInt(heading.tagName.substring(1));
            if (level <= 3) {
                tocData.push({
                    text: heading.textContent,
                    id: heading.id,
                    level: level
                });
            }

            // Add anchor link
            if (!heading.querySelector('.heading-anchor')) {
                const anchor = document.createElement('a');
                anchor.className = 'heading-anchor';
                anchor.href = '#' + heading.id;
                anchor.innerHTML = '<i class="fa-solid fa-link"></i>';
                heading.appendChild(anchor);
            }
            
            heading.classList.add('faq-heading');
        });

        if (tocData.length > 0) {
            const tocHTML = tocData.map(function(item) {
                return '<a href="#' + item.id + '" class="toc-link" data-level="' + item.level + '">' + item.text + '</a>';
            }).join('');
            tocEl.innerHTML = tocHTML;
            setupTOCObserver();
        }

        function setupTOCObserver() {
            const headings = document.querySelectorAll('.faq-heading');
            const tocLinks = document.querySelectorAll('.toc-link');

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) {
                        tocLinks.forEach(function(link) { link.classList.remove('active'); });
                        const id = entry.target.getAttribute('id');
                        const activeLink = document.querySelector('.toc-link[href="#' + id + '"]');
                        if (activeLink) activeLink.classList.add('active');
                    }
                });
            }, { rootMargin: '-100px 0px -60% 0px' });

            headings.forEach(function(heading) { observer.observe(heading); });
        }
    });
</script>
