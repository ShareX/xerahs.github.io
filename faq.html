---
layout: default
title: FAQ
description: Frequently asked questions about XerahS.
---

<section class="page-header">
    <div class="container">
        <div class="page-header-content animate-on-scroll">
            <h1 class="page-title gradient-text">FAQ</h1>
            <p class="page-subtitle">Frequently asked questions about XerahS</p>
        </div>
    </div>
</section>

<section class="faq-section section-padding">
    <div class="container">
        <div class="faq-layout">
            <!-- TOC Sidebar -->
            <aside class="faq-sidebar animate-on-scroll">
                <div class="sticky-toc">
                    <h3 class="toc-title">Contents</h3>
                    <nav class="toc-nav" id="toc-nav">
                        <!-- TOC generated by JS -->
                    </nav>
                </div>
            </aside>

            <!-- Main Content -->
            <div class="faq-main animate-on-scroll">
                <div class="faq-container card">
                    <div class="spotlight"></div>
                    <div class="faq-content" id="faq-content">
                        <div class="faq-loading">
                            <i class="fa-solid fa-spinner fa-spin"></i>
                            <span>Loading FAQ...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Marked.js for Markdown rendering -->
<script src="https://cdn.jsdelivr.net/npm/marked@9.1.2/marked.min.js"></script>

<script>
    const renderer = new marked.Renderer();
    const tocData = [];

    // Custom heading renderer to generate IDs and TOC data
    renderer.heading = function (text, level, raw) {
        const rawText = raw || text || '';
        const slug = String(rawText).toLowerCase()
            .replace(/[^\w\s-]/g, '')
            .replace(/\s+/g, '-')
            .replace(/-+/g, '-');

        if (level <= 3) {
            tocData.push({ text: text, id: slug, level: level });
        }

        return `
            <h${level} id="${slug}" class="faq-heading">
                ${text}
                <a href="#${slug}" class="heading-anchor" aria-label="Link to this section">
                    <i class="fa-solid fa-link"></i>
                </a>
            </h${level}>`;
    };

    marked.use({ renderer: renderer });

    // Target the RAW markdown file from the XerahS repo
    const faqUrl = 'https://raw.githubusercontent.com/ShareX/XerahS/develop/FAQ.md';
    const contentEl = document.getElementById('faq-content');
    const tocEl = document.getElementById('toc-nav');

    function generateTOC() {
        if (tocData.length === 0) return;
        const tocHTML = tocData.map(function(item) {
            return `<a href="#${item.id}" class="toc-link" data-level="${item.level}">${item.text}</a>`;
        }).join('');
        tocEl.innerHTML = tocHTML;
        setupTOCObserver();
    }

    function setupTOCObserver() {
        const headings = document.querySelectorAll('.faq-heading');
        const tocLinks = document.querySelectorAll('.toc-link');

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry) {
                if (entry.isIntersecting) {
                    tocLinks.forEach(function(link) { link.classList.remove('active'); });
                    const id = entry.target.getAttribute('id');
                    const activeLink = document.querySelector(`.toc-link[href="#${id}"]`);
                    if (activeLink) activeLink.classList.add('active');
                }
            });
        }, { rootMargin: '-100px 0px -60% 0px' });

        headings.forEach(function(heading) { observer.observe(heading); });
    }

    fetch(faqUrl)
        .then(function(response) {
            if (!response.ok) throw new Error('Failed to fetch FAQ content');
            return response.text();
        })
        .then(function(markdown) {
            contentEl.innerHTML = marked.parse(markdown);
            generateTOC();
            
            // Re-initialize any components if needed (e.g., Fancybox, though not used in FAQ typically)
        })
        .catch(function(error) {
            console.error('FAQ Error:', error);
            contentEl.innerHTML = `
                <div class="error-message" style="text-align: center; padding: 2rem; color: #ff6b6b;">
                    <i class="fa-solid fa-exclamation-circle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                    <p style="font-weight: bold; margin-bottom: 0.5rem;">Failed to load FAQ</p>
                    <p style="font-family: monospace; font-size: 0.875rem; background: rgba(0,0,0,0.2); padding: 0.5rem; border-radius: 4px; display: inline-block; text-align: left; max-width: 100%; overflow-x: auto;">
                        ${error.message}
                    </p>
                    <p style="margin-top: 1rem;">
                        <a href="https://github.com/ShareX/XerahS/blob/develop/FAQ.md" target="_blank" style="text-decoration: underline;">View on GitHub</a>
                    </p>
                </div>
            `;
        });
</script>
